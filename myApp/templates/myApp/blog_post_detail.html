{% extends 'myApp/base.html' %}

{% block title %}{{ post.title }} - Garden Gate Property Management{% endblock %}

{% block content %}
{% include 'myApp/partials/header.html' %}

<!-- Premium Blog Post Detail -->
<article class="relative min-h-screen bg-gradient-to-b from-warm-grey/40 via-white to-warm-grey/20">
  <!-- Decorative background elements -->
  <div class="fixed inset-0 pointer-events-none overflow-hidden opacity-[0.02]">
    <div class="absolute top-0 right-0 w-[800px] h-[800px] bg-blue rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 left-0 w-[600px] h-[600px] bg-gold rounded-full blur-3xl"></div>
  </div>

  <div class="relative max-w-7xl mx-auto px-6 lg:px-8 pt-8 pb-24 lg:pt-12 lg:pb-32">
    
    <!-- Premium Navigation Bar -->
    <nav class="sticky top-0 z-50 mb-8 lg:mb-12 backdrop-blur-xl bg-white/80 border-b border-navy/5">
      <div class="max-w-5xl mx-auto flex items-center justify-between py-4">
        <a href="{% url 'home' %}#blog"
           class="group inline-flex items-center gap-3 text-navy/70 hover:text-navy transition-all duration-300 font-medium">
          <div class="w-8 h-8 rounded-full bg-navy/5 group-hover:bg-navy/10 flex items-center justify-center transition-all duration-300 group-hover:scale-110">
            <i class="fas fa-arrow-left text-xs"></i>
          </div>
          <span class="hidden sm:inline">Back to Blog</span>
        </a>

        <!-- Premium Share Utilities -->
        <div class="flex items-center gap-3">
          <button
            onclick="navigator.clipboard.writeText('{{ request.build_absolute_uri }}'); this.innerHTML='<i class=\'fas fa-check text-xs\'></i> Copied'; setTimeout(() => this.innerHTML='<i class=\'fas fa-link text-xs\'></i> Copy', 2000);"
            class="group relative inline-flex items-center gap-2 rounded-full border border-navy/10 bg-white/80 backdrop-blur-sm px-4 py-2.5 text-sm text-navy/70 hover:text-navy hover:border-gold/30 hover:bg-gold/5 transition-all duration-300 shadow-sm hover:shadow-md">
            <i class="fas fa-link text-xs group-hover:scale-110 transition-transform"></i>
            <span class="hidden sm:inline">Copy Link</span>
          </button>

          <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}"
             target="_blank"
             rel="noopener"
             class="group inline-flex items-center gap-2 rounded-full border border-navy/10 bg-white/80 backdrop-blur-sm px-4 py-2.5 text-sm text-navy/70 hover:text-navy hover:border-blue/30 hover:bg-blue/5 transition-all duration-300 shadow-sm hover:shadow-md">
            <i class="fab fa-linkedin-in text-xs group-hover:scale-110 transition-transform"></i>
            <span class="hidden sm:inline">Share</span>
          </a>
        </div>
      </div>
    </nav>

    <!-- Premium Hero Section -->
    <header class="max-w-4xl mx-auto mb-12 lg:mb-16 fade-in">
      <!-- Category Badge with Premium Styling -->
      <div class="flex items-center gap-4 mb-8">
        <span class="inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-gold/15 via-gold/10 to-gold/5 border border-gold/20 text-gold px-5 py-2.5 text-xs font-bold uppercase tracking-wider shadow-sm">
          <span class="w-1.5 h-1.5 rounded-full bg-gold animate-pulse"></span>
          Property Management
        </span>
        
        <div class="flex items-center gap-4 text-sm text-navy/50">
          <span class="inline-flex items-center gap-2">
            <i class="fas fa-calendar-alt text-gold/70"></i>
            <span class="font-medium">{{ post.published_date|date:"F d, Y" }}</span>
          </span>
          <span class="text-navy/20">•</span>
          <span class="inline-flex items-center gap-2">
            <i class="fas fa-user text-gold/70"></i>
            <span class="font-medium">{{ post.author_name }}</span>
          </span>
          {% if post.view_count > 0 %}
          <span class="text-navy/20">•</span>
          <span class="inline-flex items-center gap-2">
            <i class="fas fa-eye text-gold/70"></i>
            <span class="font-medium">{{ post.view_count }} view{{ post.view_count|pluralize }}</span>
          </span>
          {% endif %}
        </div>
      </div>

      <!-- Premium Title with Elegant Typography -->
      <h1 class="text-5xl md:text-6xl lg:text-7xl font-display font-normal text-navy leading-[1.1] tracking-tight mb-8 prevent-orphans">
        <span class="bg-gradient-to-r from-navy via-navy to-blue bg-clip-text text-transparent">
          {{ post.title }}
        </span>
      </h1>

      <!-- Premium Excerpt -->
      {% if post.excerpt %}
      <p class="text-xl md:text-2xl text-navy/70 leading-relaxed max-w-3xl font-light italic border-l-4 border-gold/30 pl-6 py-2">
        {{ post.excerpt }}
      </p>
      {% endif %}
    </header>

    <!-- Premium Featured Image -->
    {% if post.featured_image_url %}
    <figure class="max-w-5xl mx-auto mb-16 lg:mb-20 fade-in">
      <div class="relative rounded-3xl overflow-hidden shadow-2xl border border-navy/5 bg-gradient-to-br from-navy/5 to-transparent group">
        <div class="absolute inset-0 bg-gradient-to-t from-navy/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
        <img
          src="{{ post.featured_image_url }}"
          alt="{{ post.featured_image_alt|default:post.title }}"
          class="w-full h-[400px] md:h-[500px] lg:h-[600px] object-cover group-hover:scale-[1.02] transition-transform duration-[2000ms] ease-out"
          loading="eager"
        >
        <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-navy/60 to-transparent"></div>
      </div>
      {% if post.featured_image_caption %}
      <figcaption class="mt-4 text-sm text-navy/55 italic text-center">
        {{ post.featured_image_caption }}
      </figcaption>
      {% endif %}
    </figure>
    {% endif %}

    <!-- Premium Content Layout -->
    <div class="max-w-5xl mx-auto grid lg:grid-cols-[1fr_320px] gap-12 lg:gap-16">
      
      <!-- Main Content Area -->
      <div class="min-w-0">
        <!-- Premium Content Card -->
        <div class="relative rounded-3xl bg-white/90 backdrop-blur-sm border border-navy/10 shadow-xl p-8 md:p-12 lg:p-16 mb-12">
          <!-- Decorative corner accent -->
          <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-gold/10 to-transparent rounded-bl-full"></div>
          
          <!-- Premium Typography Content -->
          <div class="prose prose-xl max-w-none 
                      prose-headings:font-display prose-headings:font-normal prose-headings:text-navy prose-headings:tracking-tight
                      prose-h1:text-4xl prose-h1:mt-12 prose-h1:mb-6 prose-h1:leading-tight
                      prose-h2:text-3xl prose-h2:mt-10 prose-h2:mb-5 prose-h2:leading-tight
                      prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-4 prose-h3:leading-tight
                      prose-p:text-navy/80 prose-p:text-lg prose-p:leading-relaxed prose-p:mb-6 prose-p:font-light
                      prose-a:text-blue prose-a:font-semibold prose-a:no-underline hover:prose-a:underline prose-a:transition-all
                      prose-strong:text-navy prose-strong:font-semibold
                      prose-em:text-navy/70 prose-em:italic
                      prose-ul:my-6 prose-ul:space-y-3
                      prose-ol:my-6 prose-ol:space-y-3
                      prose-li:text-navy/80 prose-li:text-lg prose-li:leading-relaxed
                      prose-li:marker:text-gold
                      prose-blockquote:border-l-4 prose-blockquote:border-gold/30 prose-blockquote:pl-6 prose-blockquote:py-4 prose-blockquote:my-8 prose-blockquote:bg-gold/5 prose-blockquote:rounded-r-lg
                      prose-blockquote:text-navy/70 prose-blockquote:italic prose-blockquote:text-lg">
            {{ post.content|safe|linebreaks }}
          </div>
        </div>

        <!-- Premium Share Section -->
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 p-8 rounded-2xl bg-gradient-to-r from-navy/5 via-gold/5 to-navy/5 border border-navy/10 backdrop-blur-sm">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gold to-blue flex items-center justify-center shadow-md">
              <i class="fas fa-share-alt text-white text-sm"></i>
            </div>
            <div>
              <p class="text-sm font-semibold text-navy">Share this article</p>
              <p class="text-xs text-navy/60">Help others discover this content</p>
            </div>
          </div>

          <div class="flex flex-wrap gap-3">
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}"
               target="_blank"
               rel="noopener"
               class="group inline-flex items-center gap-2 rounded-xl border border-navy/10 bg-white px-5 py-3 text-sm font-semibold text-navy/70 hover:text-white hover:bg-blue hover:border-blue transition-all duration-300 shadow-sm hover:shadow-lg hover:scale-105">
              <i class="fab fa-facebook-f text-xs group-hover:scale-110 transition-transform"></i>
              Facebook
            </a>

            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}"
               target="_blank"
               rel="noopener"
               class="group inline-flex items-center gap-2 rounded-xl border border-navy/10 bg-white px-5 py-3 text-sm font-semibold text-navy/70 hover:text-white hover:bg-black hover:border-black transition-all duration-300 shadow-sm hover:shadow-lg hover:scale-105">
              <i class="fab fa-twitter text-xs group-hover:scale-110 transition-transform"></i>
              X
            </a>

            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}"
               target="_blank"
               rel="noopener"
               class="group inline-flex items-center gap-2 rounded-xl border border-navy/10 bg-white px-5 py-3 text-sm font-semibold text-navy/70 hover:text-white hover:bg-blue-600 hover:border-blue-600 transition-all duration-300 shadow-sm hover:shadow-lg hover:scale-105">
              <i class="fab fa-linkedin-in text-xs group-hover:scale-110 transition-transform"></i>
              LinkedIn
            </a>

            <button onclick="navigator.clipboard.writeText('{{ request.build_absolute_uri }}'); this.innerHTML='<i class=\'fas fa-check\'></i> Copied'; setTimeout(() => this.innerHTML='<i class=\'fas fa-link\'></i> Copy', 2000);"
                    class="group inline-flex items-center gap-2 rounded-xl border border-navy/10 bg-white px-5 py-3 text-sm font-semibold text-navy/70 hover:text-navy hover:border-gold hover:bg-gold/5 transition-all duration-300 shadow-sm hover:shadow-lg hover:scale-105">
              <i class="fas fa-link text-xs group-hover:scale-110 transition-transform"></i>
              Copy
            </button>
          </div>
        </div>
      </div>

      <!-- Premium Sidebar -->
      <aside class="lg:sticky lg:top-24 h-fit space-y-6">
        <!-- Premium CTA Card -->
        <div class="relative overflow-hidden rounded-3xl border border-navy/10 bg-gradient-to-br from-white via-gold/5 to-white shadow-xl p-8">
          <!-- Decorative elements -->
          <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-gold/20 to-transparent rounded-bl-full"></div>
          <div class="absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-blue/10 to-transparent rounded-tr-full"></div>
          
          <div class="relative">
            <div class="inline-flex items-center gap-2 mb-4">
              <div class="w-2 h-2 rounded-full bg-gold animate-pulse"></div>
              <p class="text-sm font-bold text-navy uppercase tracking-wider">Quick Take</p>
            </div>
            <p class="text-base text-navy/80 leading-relaxed mb-6 font-light">
              Want help applying this to your rental or portfolio? We can review your current setup and recommend the next best step.
            </p>

            <a href="#contact"
               class="group relative inline-flex w-full items-center justify-center gap-3 rounded-xl bg-gradient-to-r from-navy via-blue to-navy bg-size-200 bg-pos-0 hover:bg-pos-100 px-6 py-4 text-white font-bold text-base transition-all duration-500 shadow-lg hover:shadow-xl hover:scale-[1.02]">
              <span>Contact Garden Gate</span>
              <i class="fas fa-arrow-right text-sm group-hover:translate-x-1 transition-transform"></i>
            </a>

            <div class="mt-4 flex items-center gap-2 text-xs text-navy/50">
              <i class="fas fa-check-circle text-gold"></i>
              <span>No pressure. Quick response.</span>
            </div>
          </div>
        </div>

        <!-- Browse More Card -->
        <div class="rounded-2xl border border-navy/10 bg-white/80 backdrop-blur-sm shadow-lg p-6">
          <p class="text-sm font-bold text-navy mb-4 uppercase tracking-wide">Browse More</p>
          <a href="{% url 'home' %}#blog"
             class="group inline-flex items-center gap-2 text-blue font-bold hover:text-navy transition-colors">
            <span>View all posts</span>
            <i class="fas fa-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
          </a>
        </div>

        <!-- Reading Time Estimate -->
        <div class="rounded-2xl border border-navy/10 bg-gradient-to-br from-warm-grey/50 to-white p-6">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-gold/10 flex items-center justify-center">
              <i class="fas fa-clock text-gold"></i>
            </div>
            <div>
              <p class="text-xs font-semibold text-navy/60 uppercase tracking-wide">Reading Time</p>
              <p class="text-lg font-bold text-navy">5-8 min</p>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <!-- Premium Related Posts Section -->
    {% if related_posts %}
    <section class="max-w-6xl mx-auto mt-24 lg:mt-32 fade-in">
      <div class="flex items-end justify-between gap-6 mb-12">
        <div>
          <h2 class="text-4xl md:text-5xl font-display font-normal text-navy mb-3">
            Related Articles
          </h2>
          <div class="w-20 h-1 bg-gradient-to-r from-gold via-blue to-transparent"></div>
        </div>
        <a href="{% url 'home' %}#blog"
           class="hidden sm:inline-flex items-center gap-2 text-sm text-navy/60 hover:text-navy transition-colors font-semibold group">
          View all <i class="fas fa-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
        </a>
      </div>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for related_post in related_posts %}
        <a href="{% url 'blog_post_detail' related_post.slug %}"
           class="group relative rounded-3xl border border-navy/10 bg-white overflow-hidden hover:border-gold/30 transition-all duration-500 shadow-lg hover:shadow-2xl hover:-translate-y-2">
          {% if related_post.featured_image_url %}
          <div class="relative aspect-[16/10] overflow-hidden bg-gradient-to-br from-navy/10 to-warm-grey/30">
            <div class="absolute inset-0 bg-gradient-to-t from-navy/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <img
              src="{{ related_post.featured_image_url }}"
              alt="{{ related_post.featured_image_alt|default:related_post.title }}"
              class="h-full w-full object-cover group-hover:scale-110 transition-transform duration-700"
              loading="lazy"
            >
          </div>
          {% endif %}

          <div class="p-6">
            <p class="text-xs text-navy/50 font-medium mb-3">
              {{ related_post.published_date|date:"M d, Y" }}
            </p>
            <h3 class="text-xl font-display font-normal text-navy leading-tight line-clamp-2 group-hover:text-blue transition-colors mb-4">
              {{ related_post.title }}
            </h3>
            <div class="flex items-center gap-2 text-gold font-bold text-sm group-hover:gap-3 transition-all">
              <span>Read Article</span>
              <i class="fas fa-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
    </section>
    {% endif %}

    <!-- Premium Bottom CTA -->
    <div class="max-w-4xl mx-auto mt-20 text-center fade-in">
      <div class="relative rounded-3xl overflow-hidden bg-gradient-to-r from-navy via-blue to-navy bg-size-200 bg-pos-0 hover:bg-pos-100 transition-all duration-1000 p-12 shadow-2xl">
        <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.03"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20"></div>
        <div class="relative">
          <h3 class="text-3xl md:text-4xl font-display font-normal text-white mb-4">
            Explore More Insights
          </h3>
          <p class="text-white/80 text-lg mb-8 max-w-2xl mx-auto">
            Discover more expert advice on property management and building successful landlord relationships.
          </p>
          <a href="{% url 'home' %}#blog"
             class="inline-flex items-center gap-3 px-10 py-5 rounded-xl bg-white text-navy font-bold text-lg hover:scale-105 transition-transform duration-300 shadow-xl hover:shadow-2xl">
            <i class="fas fa-arrow-left"></i>
            Back to All Posts
          </a>
        </div>
      </div>
    </div>

  </div>
</article>

{% include 'myApp/partials/footer.html' %}
{% include 'myApp/partials/scripts.html' %}

<style>
  /* Premium Animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .fade-in {
    animation: fadeInUp 0.8s ease-out;
  }
  
  /* Premium Gradient Background Animation */
  .bg-size-200 {
    background-size: 200% 200%;
  }
  
  .bg-pos-0 {
    background-position: 0% 0%;
  }
  
  .bg-pos-100 {
    background-position: 100% 0%;
  }
  
  /* Premium Prose Styling */
  .prose {
    color: #0F1A2A;
  }
  
  .prose p {
    margin-bottom: 1.75rem;
    line-height: 1.9;
    font-size: 1.125rem;
  }
  
  .prose h2 {
    font-family: 'Barlow Semi Condensed', sans-serif;
    font-size: 2.25rem;
    font-weight: 400;
    text-transform: uppercase;
    color: #0F1A2A;
    margin-top: 3rem;
    margin-bottom: 1.5rem;
    letter-spacing: -0.02em;
  }
  
  .prose h3 {
    font-family: 'Barlow Semi Condensed', sans-serif;
    font-size: 1.75rem;
    font-weight: 400;
    text-transform: uppercase;
    color: #0F1A2A;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    letter-spacing: -0.01em;
  }
  
  /* List indentation and styling - Force override Tailwind with maximum specificity */
  article div.prose ul,
  article div.prose ol,
  article .prose ul,
  article .prose ol,
  div.prose ul, 
  div.prose ol,
  .prose ul, 
  .prose ol {
    margin: 2rem 0 !important;
    padding-left: 3rem !important;
    padding-right: 0 !important;
    list-style-position: outside !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  article div.prose li,
  article .prose li,
  div.prose li,
  .prose li {
    margin-bottom: 1rem !important;
    line-height: 1.9 !important;
    position: relative !important;
    padding-left: 0.75rem !important;
    padding-right: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    text-indent: 0 !important;
  }
  
  /* Bullet point styling - Gold markers with proper indentation */
  article div.prose ul li,
  article .prose ul li,
  div.prose ul li,
  .prose ul li {
    list-style-type: disc !important;
    padding-left: 0.75rem !important;
    margin-left: 0 !important;
    display: list-item !important;
  }
  
  article div.prose ul li::marker,
  article .prose ul li::marker,
  div.prose ul li::marker,
  .prose ul li::marker {
    color: #D4AF37 !important;
    font-weight: bold !important;
    font-size: 1.5rem !important;
  }
  
  /* Numbered list styling - make numbers bold */
  article div.prose ol,
  article .prose ol,
  div.prose ol,
  .prose ol {
    list-style-type: decimal !important;
    padding-left: 3rem !important;
  }
  
  article div.prose ol li,
  article .prose ol li,
  div.prose ol li,
  .prose ol li {
    list-style-type: decimal !important;
    padding-left: 0.75rem !important;
    margin-left: 0 !important;
    display: list-item !important;
  }
  
  article div.prose ol li::marker,
  article .prose ol li::marker,
  div.prose ol li::marker,
  .prose ol li::marker {
    font-weight: 900 !important;
    font-size: 1.125rem !important;
    color: #0F1A2A !important;
  }
  
  /* Ensure paragraphs don't have unwanted indentation */
  .prose p {
    text-indent: 0;
  }
  
  /* Style headings that might contain numbers */
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    text-indent: 0;
  }
  
  /* Make numbered headings and paragraphs bold - high specificity */
  article .prose h1.numbered-heading,
  article .prose h2.numbered-heading,
  article .prose h3.numbered-heading,
  article .prose h4.numbered-heading,
  article .prose h5.numbered-heading,
  article .prose h6.numbered-heading,
  article .prose p.numbered-heading,
  .prose h1.numbered-heading,
  .prose h2.numbered-heading,
  .prose h3.numbered-heading,
  .prose h4.numbered-heading,
  .prose h5.numbered-heading,
  .prose h6.numbered-heading,
  .prose p.numbered-heading {
    font-weight: 800 !important;
  }
  
  /* Style paragraphs that are numbered headings */
  article .prose p.numbered-heading {
    font-size: 1.5rem !important;
    margin-top: 2rem !important;
    margin-bottom: 1rem !important;
  }
  
  /* Additional specificity for nested lists */
  article .prose ul ul,
  article .prose ol ol,
  article .prose ul ol,
  article .prose ol ul,
  div.prose ul ul,
  div.prose ol ol,
  div.prose ul ol,
  div.prose ol ul,
  .prose ul ul,
  .prose ol ol,
  .prose ul ol,
  .prose ol ul {
    margin: 1rem 0 !important;
    padding-left: 2.5rem !important;
  }
  
  .prose strong {
    font-weight: 600;
    color: #0F1A2A;
  }
  
  .prose em {
    font-style: italic;
    color: #0F1A2A;
    opacity: 0.8;
  }
  
  .prose a {
    color: #3B82F6;
    font-weight: 600;
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.3s ease;
  }
  
  .prose a:hover {
    border-bottom-color: #3B82F6;
  }
  
  .prose blockquote {
    border-left: 4px solid rgba(59, 130, 246, 0.3);
    padding-left: 1.5rem;
    padding-top: 1rem;
    padding-bottom: 1rem;
    margin: 2rem 0;
    background: rgba(59, 130, 246, 0.05);
    border-radius: 0 0.5rem 0.5rem 0;
  }
  
  .prose blockquote p {
    margin-bottom: 0;
    font-style: italic;
    color: #0F1A2A;
    opacity: 0.8;
  }
  
  /* Line clamp utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }
  
  /* Premium hover effects */
  @media (hover: hover) {
    .group:hover img {
      transform: scale(1.1);
    }
  }
  
  /* Final override for list indentation - highest priority */
  article .prose ul,
  article .prose ol {
    padding-left: 3rem !important;
    margin-left: 0 !important;
  }
  
  article .prose ul li,
  article .prose ol li {
    padding-left: 0.75rem !important;
    margin-left: 0 !important;
  }
</style>

<script>
  // Make numbered headings/paragraphs bold and ensure list indentation
  document.addEventListener('DOMContentLoaded', function() {
    const prose = document.querySelector('article .prose') || document.querySelector('.prose');
    if (!prose) return;
    
    // Process headings (h1-h6) - make entire heading bold if it starts with a number
    const headings = prose.querySelectorAll('h1, h2, h3, h4, h5, h6');
    headings.forEach(heading => {
      const text = (heading.textContent || heading.innerText || '').trim();
      // Match patterns like "1. ", "2. ", "10. ", "1.1. " at the start
      if (/^\d+(\.\d+)*[.)]\s+/.test(text)) {
        heading.classList.add('numbered-heading');
        heading.style.setProperty('font-weight', '800', 'important');
        heading.style.fontWeight = '800';
      }
    });
    
    // Process paragraphs - make paragraphs that start with numbers bold
    const paragraphs = prose.querySelectorAll('p');
    paragraphs.forEach(p => {
      const text = (p.textContent || p.innerText || '').trim();
      // Match patterns like "1. ", "2. ", "10. " at the start of paragraph
      if (/^\d+(\.\d+)*[.)]\s+/.test(text)) {
        p.classList.add('numbered-heading');
        p.style.setProperty('font-weight', '800', 'important');
        p.style.fontWeight = '800';
        p.style.fontSize = '1.5rem';
        p.style.marginTop = '2rem';
        p.style.marginBottom = '1rem';
      }
    });
    
    // Convert bullet character (●) to proper HTML lists
    // Process all paragraphs to find ones with bullets
    paragraphs.forEach(p => {
      const text = p.textContent || p.innerText || '';
      const html = p.innerHTML;
      
      // Check if paragraph contains bullet character
      if (text.includes('●')) {
        // Split by <br> tags or line breaks
        const parts = html.split(/<br\s*\/?>/i);
        let hasBullets = false;
        let listItems = [];
        let beforeList = [];
        let afterList = [];
        let currentSection = beforeList;
        
        parts.forEach(part => {
          const trimmed = part.trim();
          if (trimmed.startsWith('●') || trimmed.includes('●')) {
            hasBullets = true;
            currentSection = listItems;
            // Extract text after bullet
            const itemText = trimmed.replace(/^●\s*/, '').trim();
            if (itemText) {
              listItems.push(`<li style="padding-left: 0.75rem !important; margin-bottom: 1rem !important; list-style-type: disc !important;">${itemText}</li>`);
            }
          } else if (trimmed && hasBullets && listItems.length > 0) {
            // We've moved past the list
            currentSection = afterList;
            afterList.push(part);
          } else if (trimmed && !hasBullets) {
            beforeList.push(part);
          }
        });
        
        // If we found bullets, replace the paragraph content
        if (hasBullets && listItems.length > 0) {
          let newHTML = '';
          if (beforeList.length > 0) {
            newHTML += beforeList.join('<br>') + '<br>';
          }
          newHTML += `<ul style="padding-left: 3rem !important; margin: 2rem 0 !important; list-style-position: outside !important;">${listItems.join('')}</ul>`;
          if (afterList.length > 0) {
            newHTML += '<br>' + afterList.join('<br>');
          }
          p.innerHTML = newHTML;
        }
      }
    });
    
    // Force list indentation - be very aggressive
    const lists = prose.querySelectorAll('ul, ol');
    lists.forEach(list => {
      // Remove any conflicting styles first
      list.style.removeProperty('padding');
      list.style.removeProperty('margin');
      // Apply indentation
      list.style.setProperty('padding-left', '3rem', 'important');
      list.style.setProperty('padding-right', '0', 'important');
      list.style.setProperty('list-style-position', 'outside', 'important');
      list.style.setProperty('margin-left', '0', 'important');
      list.style.setProperty('margin-right', '0', 'important');
      list.style.setProperty('margin-top', '2rem', 'important');
      list.style.setProperty('margin-bottom', '2rem', 'important');
    });
    
    // Ensure list items have proper spacing
    const listItems = prose.querySelectorAll('li');
    listItems.forEach(li => {
      li.style.removeProperty('padding');
      li.style.removeProperty('margin');
      li.style.setProperty('padding-left', '0.75rem', 'important');
      li.style.setProperty('padding-right', '0', 'important');
      li.style.setProperty('margin-left', '0', 'important');
      li.style.setProperty('margin-right', '0', 'important');
      li.style.setProperty('margin-bottom', '1rem', 'important');
      li.style.setProperty('text-indent', '0', 'important');
    });
    
    // Make sure ul markers are gold and bold
    const ulItems = prose.querySelectorAll('ul li');
    ulItems.forEach(li => {
      li.style.setProperty('list-style-type', 'disc', 'important');
      li.style.setProperty('display', 'list-item', 'important');
    });
    
    // Style ul markers with gold color via injected style
    let markerStyle = document.getElementById('bullet-marker-style');
    if (!markerStyle) {
      markerStyle = document.createElement('style');
      markerStyle.id = 'bullet-marker-style';
      markerStyle.textContent = `
        article .prose ul li::marker,
        .prose ul li::marker,
        div.prose ul li::marker {
          color: #D4AF37 !important;
          font-weight: bold !important;
          font-size: 1.5rem !important;
        }
      `;
      document.head.appendChild(markerStyle);
    }
    
    // Make sure ol markers are bold
    const olItems = prose.querySelectorAll('ol li');
    olItems.forEach(li => {
      li.style.setProperty('list-style-type', 'decimal', 'important');
      li.style.setProperty('display', 'list-item', 'important');
    });
  });
</script>

{% endblock %}
